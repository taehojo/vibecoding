# PRD Step 1: ì´ë¯¸ì§€ ì¸ì‹ í•µì‹¬ ê¸°ëŠ¥
**Phase 1 - ëƒ‰ì¥ê³  ì¬ë£Œ ì¸ì‹ ì‹œìŠ¤í…œ êµ¬ì¶•**

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ëª©í‘œ
ëƒ‰ì¥ê³  ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ë©´ AIê°€ ìë™ìœ¼ë¡œ ì¬ë£Œë¥¼ ì¸ì‹í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„

### 1.2 ë²”ìœ„
- ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¸í„°í˜ì´ìŠ¤
- OpenRouter APIë¥¼ í†µí•œ Llama-4-maverick ëª¨ë¸ ì—°ë™
- ì¬ë£Œ ì¸ì‹ ë° ê²°ê³¼ í‘œì‹œ
- ê¸°ë³¸ ì›¹ UI êµ¬ì¶•

### 1.3 ê°œë°œ ê¸°ê°„
5ì¼ (1ì£¼)

### 1.4 ì„±ê³µ ì§€í‘œ
- ì´ë¯¸ì§€ ì—…ë¡œë“œ ì„±ê³µë¥  95% ì´ìƒ
- ì¬ë£Œ ì¸ì‹ ì •í™•ë„ 70% ì´ìƒ
- ì‘ë‹µ ì‹œê°„ 15ì´ˆ ì´ë‚´

## 2. ê¸°ìˆ  ìŠ¤íƒ

```yaml
Backend:
  - Python 3.9+
  - FastAPI (ë°±ì—”ë“œ API)
  - Pillow (ì´ë¯¸ì§€ ì²˜ë¦¬)
  - python-dotenv (í™˜ê²½ ë³€ìˆ˜)

Frontend:
  - Streamlit (ì›¹ ì¸í„°í˜ì´ìŠ¤)
  - HTML/CSS (ìŠ¤íƒ€ì¼ë§)

AI/ML:
  - OpenRouter API
  - meta-llama/llama-4-maverick:free

Database:
  - JSON íŒŒì¼ (ì„ì‹œ ì €ì¥)
```

## 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web Browser   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Streamlit UI  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Image Service  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OpenRouter API  â”‚
â”‚  (Llama-4)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 4. í”„ë¡œì íŠ¸ êµ¬ì¡°

```
Study-04/
â”œâ”€â”€ app.py                    # Streamlit ë©”ì¸ ì•±
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py            # ì„¤ì • ê´€ë¦¬
â”‚   â”œâ”€â”€ image_service.py     # ì´ë¯¸ì§€ ì²˜ë¦¬
â”‚   â””â”€â”€ openrouter_client.py # API í´ë¼ì´ì–¸íŠ¸
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ components.py        # UI ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ styles.css          # ìŠ¤íƒ€ì¼ì‹œíŠ¸
â”œâ”€â”€ data/
â”‚   â””â”€â”€ temp/               # ì„ì‹œ ì´ë¯¸ì§€ ì €ì¥
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_images/        # í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€
â”œâ”€â”€ .env                    # API í‚¤
â”œâ”€â”€ requirements.txt        # ì˜ì¡´ì„±
â””â”€â”€ README.md              # ë¬¸ì„œ
```

## 5. í•µì‹¬ ê¸°ëŠ¥ ìƒì„¸

### 5.1 ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥

#### 5.1.1 UI ì»´í¬ë„ŒíŠ¸
```python
# Streamlit ì—…ë¡œë“œ ìœ„ì ¯
uploaded_file = st.file_uploader(
    "ëƒ‰ì¥ê³  ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ì„¸ìš”",
    type=['jpg', 'jpeg', 'png', 'webp'],
    accept_multiple_files=False
)
```

#### 5.1.2 ì´ë¯¸ì§€ ì „ì²˜ë¦¬
```python
class ImageProcessor:
    def process_image(self, file):
        # 1. ì´ë¯¸ì§€ ê²€ì¦
        # 2. í¬ê¸° ì¡°ì • (max 1024x1024)
        # 3. Base64 ì¸ì½”ë”©
        # 4. ë©”íƒ€ë°ì´í„° ì¶”ì¶œ
```

### 5.2 ì¬ë£Œ ì¸ì‹ ê¸°ëŠ¥

#### 5.2.1 API í˜¸ì¶œ
```python
class IngredientRecognizer:
    def __init__(self):
        self.client = OpenRouterClient()
        self.model = "meta-llama/llama-4-maverick:free"

    def recognize(self, image_base64):
        prompt = self._create_prompt()
        response = self.client.chat(
            model=self.model,
            messages=[{
                "role": "user",
                "content": [
                    {"type": "text", "text": prompt},
                    {"type": "image_url", "image_url": {"url": f"data:image/jpeg;base64,{image_base64}"}}
                ]
            }]
        )
        return self._parse_response(response)
```

#### 5.2.2 í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§
```python
RECOGNITION_PROMPT = """
You are analyzing a refrigerator image. Please identify all visible food ingredients.

Instructions:
1. List each ingredient you can clearly see
2. Group similar items together
3. Include approximate quantities when visible
4. Categorize by type (vegetables, fruits, meat, dairy, condiments, etc.)

Output Format:
Category: [Category Name]
- [Ingredient]: [Quantity if visible]

Be specific and accurate. Only list items you're confident about.
"""
```

### 5.3 ê²°ê³¼ í‘œì‹œ

#### 5.3.1 UI ë ˆì´ì•„ì›ƒ
```python
# ê²°ê³¼ í‘œì‹œ ë ˆì´ì•„ì›ƒ
col1, col2 = st.columns([1, 1])

with col1:
    st.image(uploaded_image, caption="ì—…ë¡œë“œëœ ì´ë¯¸ì§€")

with col2:
    st.subheader("ì¸ì‹ëœ ì¬ë£Œ")
    for category, items in ingredients.items():
        st.write(f"**{category}**")
        for item in items:
            st.write(f"â€¢ {item}")
```

#### 5.3.2 ë°ì´í„° êµ¬ì¡°
```json
{
  "timestamp": "2025-01-14T10:30:00",
  "image_id": "img_001",
  "ingredients": {
    "vegetables": ["ì–‘íŒŒ 2ê°œ", "ë‹¹ê·¼ 1ê°œ", "ê°ì 3ê°œ"],
    "meat": ["ë¼ì§€ê³ ê¸° 300g", "ë‹­ê°€ìŠ´ì‚´ 200g"],
    "dairy": ["ìš°ìœ  1L", "ì¹˜ì¦ˆ 100g"],
    "condiments": ["ê°„ì¥", "ê³ ì¶”ì¥", "ì°¸ê¸°ë¦„"]
  },
  "confidence": 0.85
}
```

## 6. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤

### 6.1 ë©”ì¸ í™”ë©´ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ğŸ³ FridgeChef - Step 1        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚    ğŸ“· ëƒ‰ì¥ê³  ì‚¬ì§„ ì—…ë¡œë“œ             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚                     â”‚          â”‚
â”‚   â”‚   [Drop Image Here] â”‚          â”‚
â”‚   â”‚         or          â”‚          â”‚
â”‚   â”‚   [Browse Files]    â”‚          â”‚
â”‚   â”‚                     â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                     â”‚
â”‚   [ì¬ë£Œ ì¸ì‹ ì‹œì‘] ë²„íŠ¼              â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸ“‹ ì¸ì‹ ê²°ê³¼                       â”‚
â”‚   Loading... / Results              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ìƒíƒœ ê´€ë¦¬

```python
# Streamlit ì„¸ì…˜ ìƒíƒœ
if 'recognized_ingredients' not in st.session_state:
    st.session_state.recognized_ingredients = None
if 'processing' not in st.session_state:
    st.session_state.processing = False
```

## 7. ì—ëŸ¬ ì²˜ë¦¬

### 7.1 ì—ëŸ¬ ìœ í˜•

| ì—ëŸ¬ ì½”ë“œ | ì„¤ëª… | ì‚¬ìš©ì ë©”ì‹œì§€ |
|----------|------|--------------|
| ERR_IMG_001 | íŒŒì¼ í˜•ì‹ ì˜¤ë¥˜ | "JPG, PNG, WEBP í˜•ì‹ë§Œ ì§€ì›ë©ë‹ˆë‹¤" |
| ERR_IMG_002 | íŒŒì¼ í¬ê¸° ì´ˆê³¼ | "10MB ì´í•˜ì˜ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤" |
| ERR_API_001 | API ì—°ê²° ì‹¤íŒ¨ | "ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”" |
| ERR_API_002 | ì‘ë‹µ ì‹œê°„ ì´ˆê³¼ | "ì²˜ë¦¬ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤" |

### 7.2 ì—ëŸ¬ ì²˜ë¦¬ ì½”ë“œ

```python
try:
    result = recognize_ingredients(image)
except APIError as e:
    st.error(f"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {e.user_message}")
    logging.error(f"API Error: {e}")
except Exception as e:
    st.error("ì˜ˆê¸°ì¹˜ ì•Šì€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤")
    logging.exception("Unexpected error")
```

## 8. í…ŒìŠ¤íŠ¸ ê³„íš

### 8.1 í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

| ID | í…ŒìŠ¤íŠ¸ í•­ëª© | ì…ë ¥ | ì˜ˆìƒ ê²°ê³¼ |
|----|------------|------|-----------|
| T1-01 | ì •ìƒ ì´ë¯¸ì§€ ì—…ë¡œë“œ | clear_fridge.jpg | ì¬ë£Œ 5ê°œ ì´ìƒ ì¸ì‹ |
| T1-02 | ë¹ˆ ëƒ‰ì¥ê³  | empty_fridge.jpg | "ì¬ë£Œ ì—†ìŒ" ë©”ì‹œì§€ |
| T1-03 | íë¦° ì´ë¯¸ì§€ | blurry.jpg | ì¼ë¶€ ì¬ë£Œ ì¸ì‹ |
| T1-04 | ëŒ€ìš©ëŸ‰ ì´ë¯¸ì§€ | large_image.jpg | ìë™ ë¦¬ì‚¬ì´ì§• í›„ ì²˜ë¦¬ |
| T1-05 | ì˜ëª»ëœ í˜•ì‹ | document.pdf | ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ |

### 8.2 ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

- ë™ì‹œ ì‚¬ìš©ì 5ëª… ì²˜ë¦¬
- í‰ê·  ì‘ë‹µ ì‹œê°„ ì¸¡ì •
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§

## 9. ë³´ì•ˆ ë° ê°œì¸ì •ë³´

### 9.1 ë³´ì•ˆ ì¡°ì¹˜
- API í‚¤ í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬
- ì—…ë¡œë“œ íŒŒì¼ ê²€ì¦
- SQL ì¸ì ì…˜ ë°©ì§€
- XSS ê³µê²© ë°©ì§€

### 9.2 ê°œì¸ì •ë³´ ë³´í˜¸
- ì—…ë¡œë“œ ì´ë¯¸ì§€ ì„ì‹œ ì €ì¥ í›„ ìë™ ì‚­ì œ
- ì‚¬ìš©ì ë°ì´í„° ì•”í˜¸í™”
- ë¡œê·¸ì— ê°œì¸ì •ë³´ ë¯¸í¬í•¨

## 10. ê°œë°œ ì¼ì •

### Day 1: í™˜ê²½ ì„¤ì •
- [x] í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„±
- [x] ì˜ì¡´ì„± ì„¤ì¹˜
- [x] OpenRouter API ì—°ë™ í…ŒìŠ¤íŠ¸

### Day 2-3: í•µì‹¬ ê¸°ëŠ¥
- [ ] ì´ë¯¸ì§€ ì—…ë¡œë“œ UI
- [ ] ì´ë¯¸ì§€ ì²˜ë¦¬ ì„œë¹„ìŠ¤
- [ ] Llama-4 ì—°ë™

### Day 4: í†µí•© ë° í…ŒìŠ¤íŠ¸
- [ ] ì „ì²´ í”Œë¡œìš° í†µí•©
- [ ] ì—ëŸ¬ ì²˜ë¦¬
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

### Day 5: ìµœì í™” ë° ë°°í¬
- [ ] UI/UX ê°œì„ 
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] ë¬¸ì„œ ì‘ì„±

## 11. ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘

### 11.1 ê¸°ìˆ ì  ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | ì˜í–¥ë„ | ëŒ€ì‘ ë°©ì•ˆ |
|--------|--------|----------|
| API ì‘ë‹µ ì§€ì—° | ë†’ìŒ | íƒ€ì„ì•„ì›ƒ ì„¤ì •, ìºì‹± |
| ì´ë¯¸ì§€ ì¸ì‹ ë¶€ì •í™• | ì¤‘ê°„ | í”„ë¡¬í”„íŠ¸ ìµœì í™” |
| ì„œë²„ ê³¼ë¶€í•˜ | ì¤‘ê°„ | Rate limiting |

### 11.2 ë¹„ì¦ˆë‹ˆìŠ¤ ë¦¬ìŠ¤í¬
- ë¬´ë£Œ API í•œë„ ì´ˆê³¼ â†’ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
- ì‚¬ìš©ì ì¦ê°€ â†’ í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜

## 12. ì™„ë£Œ ê¸°ì¤€

### 12.1 í•„ìˆ˜ ê¸°ëŠ¥
- âœ… ì´ë¯¸ì§€ ì—…ë¡œë“œ ê°€ëŠ¥
- âœ… ì¬ë£Œ ì¸ì‹ ì‘ë™
- âœ… ê²°ê³¼ í‘œì‹œ
- âœ… ì—ëŸ¬ ì²˜ë¦¬

### 12.2 í’ˆì§ˆ ê¸°ì¤€
- âœ… ì‘ë‹µ ì‹œê°„ 15ì´ˆ ì´ë‚´
- âœ… ì¸ì‹ ì •í™•ë„ 70% ì´ìƒ
- âœ… í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 60% ì´ìƒ

## 13. ë‹¤ìŒ ë‹¨ê³„ ì¤€ë¹„

Step 2ì—ì„œ ì¶”ê°€ë  ê¸°ëŠ¥:
- DeepSeek ëª¨ë¸ì„ ì´ìš©í•œ ë ˆì‹œí”¼ ìƒì„±
- ì¬ë£Œ í¸ì§‘ ê¸°ëŠ¥
- ë ˆì‹œí”¼ í•„í„°ë§
- ê³ ê¸‰ UI ê°œì„ 

---

**ë¬¸ì„œ ì •ë³´**
- ì‘ì„±ì¼: 2025-01-14
- ë²„ì „: 1.0
- ì‘ì„±ì: System
- ê²€í†  ì˜ˆì •ì¼: Step 1 ì™„ë£Œ ì‹œ