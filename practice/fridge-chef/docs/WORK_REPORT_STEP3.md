# Fridge Chef Step 3 êµ¬í˜„ ì‘ì—… ë³´ê³ ì„œ

**ì‘ì„±ì¼**: 2025-12-26
**ì‘ì—…ì**: Claude Code (Opus 4.5)

---

## 1. ì‘ì—… ê°œìš”

### 1.1 ì‘ì—… ëª©í‘œ
Fridge Chef í”„ë¡œì íŠ¸ì˜ Step 3 "ì‚¬ìš©ì í”„ë¡œí•„ ë° ê°œì¸í™”" ê¸°ëŠ¥ êµ¬í˜„

### 1.2 ì‘ì—… ë²”ìœ„
- ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ (íšŒì›ê°€ì…/ë¡œê·¸ì¸)
- í”„ë¡œí•„ ë° ì„ í˜¸ë„ ì„¤ì •
- ë ˆì‹œí”¼ ì €ì¥ ë° ê´€ë¦¬
- ëŒ€ì‹œë³´ë“œ ë° í†µê³„
- ì†Œì…œ ê³µìœ  ê¸°ëŠ¥

---

## 2. ì‚¬ìš©ëœ ë„êµ¬ (Tools)

### 2.1 íŒŒì¼ ì‘ì—… ë„êµ¬

| Tool | ìš©ë„ | ì‚¬ìš© íšŸìˆ˜ |
|------|------|-----------|
| **Read** | íŒŒì¼ ë‚´ìš© ì½ê¸° | ë‹¤ìˆ˜ |
| **Write** | ìƒˆ íŒŒì¼ ìƒì„± | 15+ |
| **Edit** | ê¸°ì¡´ íŒŒì¼ ìˆ˜ì • | 10+ |
| **Glob** | íŒŒì¼ íŒ¨í„´ ê²€ìƒ‰ | ì¼ë¶€ |
| **Grep** | ì½”ë“œ ë‚´ìš© ê²€ìƒ‰ | ì¼ë¶€ |

### 2.2 ì‹¤í–‰ ë„êµ¬

| Tool | ìš©ë„ | ì£¼ìš” ëª…ë ¹ì–´ |
|------|------|-------------|
| **Bash** | ëª…ë ¹ì–´ ì‹¤í–‰ | `uv sync`, `uv run pytest`, `uv run streamlit run app.py` |

### 2.3 ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ ë„êµ¬ (Chrome DevTools MCP)

| Tool | ìš©ë„ |
|------|------|
| **mcp__chrome-devtools__new_page** | ìƒˆ ë¸Œë¼ìš°ì € í˜ì´ì§€ ì—´ê¸° |
| **mcp__chrome-devtools__navigate_page** | URL ì´ë™ |
| **mcp__chrome-devtools__take_snapshot** | DOM ìŠ¤ëƒ…ìƒ· ìº¡ì²˜ |
| **mcp__chrome-devtools__take_screenshot** | ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ |
| **mcp__chrome-devtools__click** | ìš”ì†Œ í´ë¦­ |
| **mcp__chrome-devtools__fill_form** | í¼ ì…ë ¥ |
| **mcp__chrome-devtools__wait_for** | í…ìŠ¤íŠ¸ ëŒ€ê¸° |
| **mcp__chrome-devtools__evaluate_script** | JavaScript ì‹¤í–‰ |

---

## 3. ì‘ì—… ê³¼ì •

### Phase 1: ìš”êµ¬ì‚¬í•­ ë¶„ì„
1. `PRD_step3.md` íŒŒì¼ ì½ê¸°
2. ê¸°ì¡´ ì½”ë“œë² ì´ìŠ¤ êµ¬ì¡° íŒŒì•…
3. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„

### Phase 2: ë°ì´í„°ë² ì´ìŠ¤ ë ˆì´ì–´ êµ¬í˜„
```
db/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ database.py    # SQLite ì—°ê²° ë° ì„¸ì…˜ ê´€ë¦¬
â”œâ”€â”€ models.py      # SQLAlchemy ORM ëª¨ë¸ (5ê°œ)
â””â”€â”€ init_db.py     # ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™”
```

**ìƒì„±ëœ ëª¨ë¸**:
- `User`: ì‚¬ìš©ì ê³„ì •
- `UserPreferences`: ì‹ì´ ì„ í˜¸ë„
- `SavedRecipe`: ì €ì¥ëœ ë ˆì‹œí”¼
- `CookingHistory`: ìš”ë¦¬ ê¸°ë¡
- `IngredientUsage`: ì¬ë£Œ ì‚¬ìš© í†µê³„

### Phase 3: ì„œë¹„ìŠ¤ ë ˆì´ì–´ êµ¬í˜„
```
services/
â”œâ”€â”€ auth.py           # ì¸ì¦ (bcrypt í•´ì‹±)
â”œâ”€â”€ user.py           # ë ˆì‹œí”¼ CRUD
â”œâ”€â”€ recommendation.py # ì¶”ì²œ ë° í†µê³„
â””â”€â”€ sharing.py        # ê³µìœ  ê¸°ëŠ¥
```

### Phase 4: UI ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
```
components/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ recipe_card.py    # ë ˆì‹œí”¼ ì¹´ë“œ
â”œâ”€â”€ share_modal.py    # ê³µìœ  ëª¨ë‹¬
â””â”€â”€ stats_widgets.py  # í†µê³„ ìœ„ì ¯

utils/
â””â”€â”€ charts.py         # Plotly ì°¨íŠ¸ í—¬í¼
```

### Phase 5: í˜ì´ì§€ êµ¬í˜„
```
pages/
â”œâ”€â”€ 3_ğŸ‘¤_ë‚´_í”„ë¡œí•„.py      # ë¡œê·¸ì¸/íšŒì›ê°€ì…/ì„¤ì •
â”œâ”€â”€ 4_ğŸ’¾_ì €ì¥ëœ_ë ˆì‹œí”¼.py  # ë ˆì‹œí”¼ ê´€ë¦¬
â””â”€â”€ 5_ğŸ“Š_ëŒ€ì‹œë³´ë“œ.py       # í†µê³„ ëŒ€ì‹œë³´ë“œ
```

### Phase 6: í…ŒìŠ¤íŠ¸ ì‘ì„±
```
tests/
â”œâ”€â”€ test_auth.py          # 14 tests
â”œâ”€â”€ test_user.py          # 9 tests
â”œâ”€â”€ test_recommendation.py # 9 tests
â””â”€â”€ test_sharing.py       # 10 tests
```

### Phase 7: ë²„ê·¸ ìˆ˜ì •

#### 7.1 ì˜ì¡´ì„± ëˆ„ë½
**ë¬¸ì œ**: `sqlalchemy`, `bcrypt`, `plotly`, `qrcode` ëª¨ë“ˆ ì—†ìŒ
**í•´ê²°**: `pyproject.toml`ì— ì˜ì¡´ì„± ì¶”ê°€ í›„ `uv sync` ì‹¤í–‰

#### 7.2 SQLAlchemy DetachedInstanceError
**ë¬¸ì œ**: ì„¸ì…˜ ì¢…ë£Œ í›„ ê°ì²´ ì ‘ê·¼ ë¶ˆê°€
**í•´ê²°**: `session.expunge()` â†’ `make_transient()` ë³€ê²½

#### 7.3 ì¬ë£Œ ì¤‘ë³µ ì¹´ìš´íŒ…
**ë¬¸ì œ**: ë™ì¼ ì¬ë£Œê°€ ì—¬ëŸ¬ ë²ˆ ì¹´ìš´íŠ¸ë¨
**í•´ê²°**: `collections.Counter`ë¡œ ì§‘ê³„ í›„ ì²˜ë¦¬

#### 7.4 datetime.utcnow() Deprecation
**ë¬¸ì œ**: Python 3.12+ deprecation ê²½ê³ 
**í•´ê²°**: `datetime.utcnow()` â†’ `datetime.now(UTC)` ë³€ê²½

#### 7.5 ê³µìœ  ë²„íŠ¼ ë¯¸ë°˜ì‘
**ë¬¸ì œ**: ê³µìœ  ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ì´ ì—´ë¦¬ì§€ ì•ŠìŒ
**í•´ê²°**: `st.expander(expanded=False)` â†’ `expanded=True` ë³€ê²½

---

## 4. ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ ê³¼ì •

### 4.1 í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
1. ì•± ì‹¤í–‰ (`streamlit run app.py --server.port 8501`)
2. ë©”ì¸ í˜ì´ì§€ ì ‘ì† í™•ì¸
3. íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸
4. ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸
5. í”„ë¡œí•„ í˜ì´ì§€ í™•ì¸
6. ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ í™•ì¸
7. ì €ì¥ëœ ë ˆì‹œí”¼ í˜ì´ì§€ í™•ì¸
8. ê³µìœ  ë²„íŠ¼ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

### 4.2 í…ŒìŠ¤íŠ¸ ê²°ê³¼
| ê¸°ëŠ¥ | ìƒíƒœ |
|------|------|
| íšŒì›ê°€ì… | âœ… ì„±ê³µ |
| ë¡œê·¸ì¸ | âœ… ì„±ê³µ |
| í”„ë¡œí•„ ì„¤ì • | âœ… ì •ìƒ í‘œì‹œ |
| ëŒ€ì‹œë³´ë“œ | âœ… Plotly ì°¨íŠ¸ ì •ìƒ |
| ê³µìœ  ëª¨ë‹¬ | âœ… ìˆ˜ì • í›„ ì •ìƒ |

---

## 5. ìµœì¢… ê²°ê³¼

### 5.1 í…ŒìŠ¤íŠ¸ í˜„í™©
```
66 tests passed in 9.53s
```

### 5.2 ìƒì„±ëœ íŒŒì¼ ëª©ë¡

| ë””ë ‰í† ë¦¬ | íŒŒì¼ | ì„¤ëª… |
|----------|------|------|
| `db/` | `__init__.py` | íŒ¨í‚¤ì§€ ì´ˆê¸°í™” |
| `db/` | `database.py` | DB ì—°ê²° |
| `db/` | `models.py` | ORM ëª¨ë¸ |
| `db/` | `init_db.py` | ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™” |
| `services/` | `auth.py` | ì¸ì¦ ì„œë¹„ìŠ¤ |
| `services/` | `user.py` | ì‚¬ìš©ì ì„œë¹„ìŠ¤ |
| `services/` | `recommendation.py` | ì¶”ì²œ ì„œë¹„ìŠ¤ |
| `services/` | `sharing.py` | ê³µìœ  ì„œë¹„ìŠ¤ |
| `utils/` | `charts.py` | ì°¨íŠ¸ ìœ í‹¸ë¦¬í‹° |
| `components/` | `__init__.py` | íŒ¨í‚¤ì§€ ì´ˆê¸°í™” |
| `components/` | `recipe_card.py` | ë ˆì‹œí”¼ ì¹´ë“œ |
| `components/` | `share_modal.py` | ê³µìœ  ëª¨ë‹¬ |
| `components/` | `stats_widgets.py` | í†µê³„ ìœ„ì ¯ |
| `pages/` | `3_ğŸ‘¤_ë‚´_í”„ë¡œí•„.py` | í”„ë¡œí•„ í˜ì´ì§€ |
| `pages/` | `4_ğŸ’¾_ì €ì¥ëœ_ë ˆì‹œí”¼.py` | ì €ì¥ ë ˆì‹œí”¼ |
| `pages/` | `5_ğŸ“Š_ëŒ€ì‹œë³´ë“œ.py` | ëŒ€ì‹œë³´ë“œ |
| `tests/` | `test_auth.py` | ì¸ì¦ í…ŒìŠ¤íŠ¸ |
| `tests/` | `test_user.py` | ì‚¬ìš©ì í…ŒìŠ¤íŠ¸ |
| `tests/` | `test_recommendation.py` | ì¶”ì²œ í…ŒìŠ¤íŠ¸ |
| `tests/` | `test_sharing.py` | ê³µìœ  í…ŒìŠ¤íŠ¸ |

### 5.3 ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡

| íŒŒì¼ | ìˆ˜ì • ë‚´ìš© |
|------|-----------|
| `pyproject.toml` | ì˜ì¡´ì„± ì¶”ê°€ |
| `pages/2_ğŸ“–_ë ˆì‹œí”¼_ìƒì„±.py` | ë ˆì‹œí”¼ ì €ì¥ í†µí•© |
| `components/share_modal.py` | expander ê¸°ë³¸ê°’ ìˆ˜ì •, ë‹«ê¸° ë²„íŠ¼ ì¶”ê°€ |
| `CLAUDE.md` | í”„ë¡œì íŠ¸ ë¬¸ì„œ ì—…ë°ì´íŠ¸ |

---

## 6. ê¸°ìˆ ì  ê²°ì • ì‚¬í•­

### 6.1 ì¸ì¦
- **bcrypt** ì‚¬ìš© (cost factor: 12)
- ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ (Streamlit session_state)

### 6.2 ë°ì´í„°ë² ì´ìŠ¤
- **SQLite** (POC ë‹¨ê³„ ì í•©)
- **SQLAlchemy 2.0** ORM
- JSON í•„ë“œë¡œ ë³µì¡í•œ ë°ì´í„° ì €ì¥ (recipe_data, tags)

### 6.3 ì°¨íŠ¸
- **Plotly** ì‚¬ìš© (ì¸í„°ë™í‹°ë¸Œ ì°¨íŠ¸)
- ìº˜ë¦°ë” íˆíŠ¸ë§µ, ë°” ì°¨íŠ¸, íŒŒì´ ì°¨íŠ¸

### 6.4 ê³µìœ 
- ê³ ìœ  share_id ìƒì„± (base64 URL-safe)
- QR ì½”ë“œ ìƒì„± (qrcode ë¼ì´ë¸ŒëŸ¬ë¦¬)
- SNS ê³µìœ  ë§í¬ (ì¹´ì¹´ì˜¤í†¡, íŠ¸ìœ„í„°, í˜ì´ìŠ¤ë¶)

---

## 7. í–¥í›„ ê°œì„  ì‚¬í•­

1. **ì„¸ì…˜ ì§€ì†ì„±**: í˜ì´ì§€ ì´ë™ ì‹œ ì„¸ì…˜ ìœ ì§€ ê°œì„ 
2. **ì´ë¯¸ì§€ ì €ì¥**: ë ˆì‹œí”¼ ì´ë¯¸ì§€ ì €ì¥ ê¸°ëŠ¥
3. **ê²€ìƒ‰ ê³ ë„í™”**: ì „ë¬¸ ê²€ìƒ‰ (Full-text search)
4. **ì•Œë¦¼ ê¸°ëŠ¥**: ìš”ë¦¬ ë¦¬ë§ˆì¸ë”
5. **ì†Œì…œ ê¸°ëŠ¥**: íŒ”ë¡œìš°, ê³µìœ  ë ˆì‹œí”¼ í”¼ë“œ

---

*ë³¸ ë³´ê³ ì„œëŠ” Claude Code (Opus 4.5)ì— ì˜í•´ ìë™ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*
